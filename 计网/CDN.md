**CDN**

* CDN即内容分发网络，目的是在现有的网络中增加一层新的网路架构；将网站的内容分发到离用户最近的网络边缘，从而提高网站的响应速度
* CDN有别于镜像，因为它比镜像更智能，或者可以做这样一个比喻： CDN=更智能的镜像+缓存+流量导流
* CDN可以明显提高网络中信息流动的效率，从技术上全面解决由于网络带宽小、用户访问量大、网点分布不均等问题

**CDN加速的原理**

* 当用户访问网站的url时，会经过本地dns系统解析，而dns系统会将域名的解析权交给cname指向的cdn专用dns服务器
* cdn的dns服务器将cdn的全局负载均衡设备ip地址返回给用户
* 用户向cdn的全局负载均衡设备发起url请求
* cdn全局负载均衡设备根据用户ip，以及用户请求的url，选择一台用户所属区域的区域负载均衡设备
* 区域负载均衡设备会为用户选择一台合适的缓存服务器提供服务，选择的依据包括：根据用户的IP地址，判断哪一台服务器距用户最近；根据用户请求的url中携带的参数，判断哪一台服务器上有用户所需内容；查询各个服务器当前的负载情况，判断哪一台服务器尚有服务能力。基于以上这些条件的综合分析之后，区域负载均衡设备会向全局负载均衡设备返回一个缓存服务器的IP地址，接着全局负载均衡设备把服务器的IP地址返回给用户
* 用户向缓存服务器发起请求，缓存服务器响应用户请求，将用户所需内容传送到用户终端。如果这台缓存服务器上没有用户想要的内容，而区域负载均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器发请求，直至追溯到网站的源服务器将内容返回给用户