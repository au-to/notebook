自我介绍：

面试官好，我是赵虎彪，本科毕业于燕山大学通信工程专业；目前在商越科技这边担任前端开发工程师；先后参与了官网、寻源供应商、审批流、采购商城等项目的开发工作；有B端和C端的项目开发经验；关于我个人的技术栈，目前工作上主要是Vue、业余也会写一点React；对前端工程化开发和相关工具链都有过完整的实践。目前也在尝试扩充自己的技术边界，主动学习服务端、数据库等相关知识；很高兴今天能有交流的机会，也希望有所收获。

项目经历：

**采购商城**

* 项目的背景是面向具有采购需求或者业务的ToB场景，就是把企业采购流程搬到线上来
* 我主要负责的是前台商品的浏览、搜索、筛选、列表、详情、购物车和后台的商品管理、上下架等
* 做了一个底层框架的升级：vue2升vue3，webpack升级vite
* 同时也做了一个首页的性能优化

如何进行的框架升级：

目的：

* 优化本地开发体验，提升开发效率
* 代码量大，工程瘦身

升级范围：

* vite@4替换webpack@5
* node版本升级，目前用的是16的版本
* vue2升级到vue3
* sass版本的升级
* 其它相关依赖的升级

整体思路：

* 初始化一个vue3版本的vite项目
* 将老项目的src文件夹和其它文件移到新项目里面
* 合并package.json的依赖项，抛弃webpack命令，保留vite命令
* 删除初始化的main.js；移入原项目的main.js到src目录下
* 修改index.html中入口文件的引入方式
* 修改main.js中的代码：比如vue创建实例，挂载实例的方法
* 下载依赖
* 解决报错
* 手动修改vue3已经不兼容vue2的问题：包括vuex升级pinia，v-model，过滤器，$set()等等

遇到的问题：

* vite默认使用es6的模块化导入导出方式，不支持require
* vite项目无法自动补全文件后缀并读取：使用插件补全
* 样式穿透deep报错：改为:deep()
* 项目使用的环境变量报错：使用vite的环境变量
* path模块无法在客户端代码中使用：安装 path-browserify 代替 path 模块
* require兼容配置，某些三方包中的require语法，在开发环境正常，打包环境报错
* rollup本身是不支持CommonJS，使用了这个插件，就可以解析CommonJS模块了
* 路径别名配置平替webpack开发环境和打包环境用到的@
* 为保证项目在浏览器的兼容性，打包目标选择最低
* vite开发环境和生产环境打包的产物有差异，有些本地没问题，部署到环境上出问题的点：插件本地调试

首页性能优化具体是怎么做的：

* 主要是懒加载结合代码分割
* 使用vite内置的动态导入功能，按需加载组件
* 使用 `<link rel="preload">` 标签预加载关键资源，如 CSS 和 JavaScript 文件，以减少首屏渲染时间
* 对可视区之外的图片进行懒加载：lazyLoad插件，按需引入
* 替换掉之前的icon和图片为svg，缩小资源体积
* 压缩图片：使用工具如 `ImageOptim` 或 `TinyPNG` 压缩图片，以减少文件大小
* 将静态资源如图片、CSS 和 JavaScript 文件托管在 CDN 上，以减少加载时间并提高资源的可用性
* 缓存请求：使用浏览器缓存或服务端缓存技术缓存常用数据，减少重复请求。

**审批流**

* 可视化审批流程设计器，支持拖拽：vue-dragable，结合jsx
* 支持多级审批和条件审批
* 如何实现多级审批：封装一个审批节点配置组件，然后递归调用
* 审批按钮，审批信息等组件放在公共组件库维护

**寻源**

问题：

* 数据结构复杂
* 复杂的数据联动及计算
* 数据缓存

解决：

* 数据处理：调一次接口，在初始化和提交时做统一处理，前端进行数据清洗/组合
* 数据缓存及提交：切换分页先暂存数据，再统一提交

**供应商管理**

问题：

* 在线评分页有多个问题维度，每个维度下有多个问题，每个问题下有多个供应商；最大的情况：50个问题*200个供应商；
* 业务需要记录每个供应商的状态，但因为有多个供应商的情况，分页器的pageSize = 10；
* 若后端分页，则无法记录每个供应商的状态，所以由后端返回全量数据，前端做分页；提交时统一做校验；

解决：

* 后端返回全量数据，前端进行数据清洗，组合数据
* 封装问题组件，在组件内部进行逻辑处理
* 前端缓存记录评分状态及信息，并做提交校验

**官网**

如何进行的SEO

* 使用html5标签元素优化网站结构
* 网站速度优化：压缩图片，使用CDN和启用浏览器缓存等
* 元标签优化：标题、描述等
* 友情链接维护

如何完善应用的代理、CSRF 防御机制，标准化本地开发和联调的流程的

* 在egg.js中配置代理服务器，以支持本地联调
* 本地开发时禁用csrf机制，仅仅在生产环境打开，可解决接口403问题
