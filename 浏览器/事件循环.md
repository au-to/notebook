主线程从任务队列中读取事件执行，这个过程是循环不断的，这个机制就称为事件循环。

具体如下：主线程会不断的从任务队列中按顺序读取任务执行，每执行完一个任务就会检查微任务队列是否为空，如果不为空就会一次性执行完所有的微任务，然后进入下一个循环去任务队列取下一个任务执行

详细步骤

1. 选择当前要执行的宏任务队列，选择一个最先进入任务队列的宏任务，如果没有宏任务可以选择，则会跳转至微任务的执行步骤。
2. 将事件循环的当前运行宏任务设置为已选择的宏任务
3. 运行宏任务
4. 将事件循环的当前运行任务设置为null
5. 将运行完的宏任务从宏任务队列中移除
6. 进入微任务检查点
7. 更新界面渲染
8. 返回第一步