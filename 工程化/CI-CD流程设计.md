åœ¨è¿‡å¾€é¡¹ç›®ä¸­æˆ‘å‚ä¸å¹¶è®¾è®¡è¿‡å‰ç«¯é¡¹ç›®çš„ CI/CDï¼ˆæŒç»­é›†æˆ / æŒç»­éƒ¨ç½²ï¼‰æµç¨‹ï¼Œç›®æ ‡æ˜¯å®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œäº¤ä»˜è´¨é‡ã€‚ä¸‹é¢æˆ‘ç»“åˆ Vue å’Œ React é¡¹ç›®ï¼Œåˆ†æ­¥éª¤è¯¦ç»†è®²è®²æˆ‘åšè¿‡çš„ CI/CD æµç¨‹è®¾è®¡ã€‚

---

## âœ… ä¸€ã€CI/CD æµç¨‹çš„æ•´ä½“ç›®æ ‡

* **CIï¼ˆæŒç»­é›†æˆï¼‰**ï¼šä»£ç æäº¤åè‡ªåŠ¨æ‰§è¡Œæ„å»ºã€ä»£ç æ£€æŸ¥ã€æµ‹è¯•ç­‰æµç¨‹
* **CDï¼ˆæŒç»­éƒ¨ç½²ï¼‰**ï¼šæ„å»ºæˆåŠŸåè‡ªåŠ¨éƒ¨ç½²åˆ°æµ‹è¯• / é¢„å‘ / ç”Ÿäº§ç¯å¢ƒ

---

## âœ… äºŒã€ä½¿ç”¨åˆ°çš„å·¥å…·æ ˆï¼ˆä»¥ä¸»æµåœºæ™¯ä¸ºä¾‹ï¼‰

| é˜¶æ®µ    | å·¥å…·                                   |
| ----- | ------------------------------------ |
| ä»£ç æ‰˜ç®¡  | GitLab / GitHub                      |
| CI å¼•æ“ | GitLab CI / GitHub Actions / Jenkins |
| æ„å»ºå·¥å…·  | Vite / Webpack / Docker              |
| æµ‹è¯•    | ESLintã€Vitest / Jestã€Playwright      |
| å‘å¸ƒéƒ¨ç½²  | SCPã€rsyncã€K8sã€Nginxã€OSS/CDN          |

---

## âœ… ä¸‰ã€å…·ä½“æµç¨‹æ‹†è§£

### ğŸ§ª 1. å¼€å‘è€…æäº¤ä»£ç  â†’ è§¦å‘ CI

* ç›‘å¬ `main` / `dev` åˆ†æ”¯çš„ Push / MR è¯·æ±‚
* è‡ªåŠ¨è§¦å‘ Pipeline

### ğŸ”§ 2. CI é˜¶æ®µï¼šä»£ç æ£€æŸ¥ + æ„å»º + å•å…ƒæµ‹è¯•

```yaml
# ç¤ºä¾‹ï¼šGitLab CI .gitlab-ci.yml ç‰‡æ®µ
stages:
  - lint
  - test
  - build
  - deploy

lint:
  stage: lint
  script:
    - npm ci
    - npm run lint

test:
  stage: test
  script:
    - npm run test

build:
  stage: build
  script:
    - npm run build
  artifacts:
    paths:
      - dist/
```

**è¯´æ˜ï¼š**

* `npm ci` ä¿è¯ä¸€è‡´æ€§æ„å»º
* ä½¿ç”¨ ESLint åšä»£ç é£æ ¼æ ¡éªŒ
* Jest / Vitest è¿›è¡Œå•æµ‹
* æ„å»ºäº§ç‰©ç¼“å­˜è‡³ `dist/`

---

### ğŸš€ 3. CD é˜¶æ®µï¼šè‡ªåŠ¨éƒ¨ç½²

**æ–¹æ¡ˆ Aï¼šä½¿ç”¨ SSH è‡ªåŠ¨ä¸Šä¼ äº§ç‰©**

```yaml
deploy:
  stage: deploy
  only:
    - main
  script:
    - scp -r dist/* user@host:/var/www/project/
```

**æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Docker + K8s + Helm**

* æ„å»º Docker é•œåƒï¼Œæ¨é€è‡³ç§æœ‰ä»“åº“
* é€šè¿‡ Helm æ»šåŠ¨éƒ¨ç½²åˆ°é¢„è®¾ç¯å¢ƒ

```yaml
script:
  - docker build -t registry/project:latest .
  - docker push registry/project:latest
  - helm upgrade project ./chart/ --set image.tag=latest
```

---

## âœ… å››ã€è¡¥å……ä¼˜åŒ–é¡¹

| åŠŸèƒ½      | æè¿°                                        |
| ------- | ----------------------------------------- |
| è‡ªåŠ¨åŒ–é¢„è§ˆç¯å¢ƒ | PR æäº¤åéƒ¨ç½²ä¸´æ—¶ç¯å¢ƒï¼Œæ”¯æŒè®¾è®¡ã€æµ‹è¯•äººå‘˜é¢„è§ˆ                  |
| æ„å»ºç¼“å­˜åŠ é€Ÿ  | åˆ©ç”¨ pnpmã€turboã€GitLab CI cache å‡å°‘æ„å»ºæ—¶é—´      |
| æäº¤æ ¡éªŒ    | husky + lint-stagedï¼Œæœ¬åœ° pre-commit é˜¶æ®µé˜²é—®é¢˜æäº¤ |
| å¤šç¯å¢ƒé…ç½®   | æ ¹æ® ENV è‡ªåŠ¨åˆ‡æ¢ API åœ°å€ã€åŸ‹ç‚¹ã€æ—¥å¿—æ”¶é›†ç­‰               |
| æ„å»ºç‰ˆæœ¬æ ‡è®°  | æ³¨å…¥ç‰ˆæœ¬å·ã€Git commit hashï¼Œç”¨äºçº¿ä¸Šé—®é¢˜å®šä½            |

---

## âœ… äº”ã€å®é™…ç»“æœ

* ä»æäº¤ä»£ç åˆ°ä¸Šçº¿å¹³å‡ç¼©çŸ­ 50% æ—¶é—´
* æµ‹è¯•/äº§å“/è¿ç»´å¯ä»¥å¿«é€ŸéªŒè¯ PR/ç‰ˆæœ¬
* å‘å¸ƒå›æ»šæ›´å®‰å…¨ï¼ˆä¿ç•™å†å²æ„å»ºç‰ˆæœ¬ï¼‰
* å¤šäººåä½œéƒ¨ç½²é—®é¢˜å¤§å¹…å‡å°‘

---